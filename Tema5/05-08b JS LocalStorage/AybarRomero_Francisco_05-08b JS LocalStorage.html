<!doctype html>
<html lang="en">
    <head>
        <title>AybarRomero_Francisco_05-08b JS LocalStorage</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS v5.2.1 -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />

        <style>
            .output { 
                background-color: #f8f9fa; 
                padding: 15px; 
                border-left: 5px solid #0dcaf0; 
                font-family: monospace; 
                border-radius: 4px; 
            }
            h5 { 
                color: #084298; 
                margin-bottom: 15px; 
                font-weight: bold; 
                text-align: center;
            }
        </style>
    </head>

    <body>

        <div class="container my-5">
            <div class="row justify-content-center">
                <div class="col-12 col-md-8 col-lg-6">

                    <section class="bg-info-subtle p-3 rounded shadow border border-info-subtle">
                        <div class="text-center">
                            <h1>Ejercicio 0</h1>
                            <hr class="border border-primary w-25 mx-auto">
                        </div>
                        <article class="bg-secondary-subtle p-3 rounded shadow-sm">
                            
                            <div class="mb-3 text-center">
                                <button id="b1" class="btn btn-primary"> Ejercicio1 add LocalStorage</button>
                            </div>

                            <h5>Ejercicios Salida</h5>
                            <div id="ejercicio2id" class="output"></div>

                            <script>
                                document.getElementById('b1').addEventListener('click',ejercicio0);
                                function ejercicio0()
                                {
                                    localStorage.setItem('Nombre', 'Miguel Antonio'); /* Primera forma */
                                    localStorage.Apellido = 'Márquez Montoya'; /* Segunda forma */

                                    document.getElementById("ejercicio2id").innerHTML = localStorage.getItem("Nombre");
                                }
                            </script>

                        </article>
                    </section>



                    <section class="bg-info-subtle p-3 my-5 rounded shadow border border-info-subtle">
                        <div class="text-center">
                            <h1>Ejercicio 1</h1>
                            <hr class="border border-primary w-25 mx-auto">
                        </div>
                        <article class="bg-secondary-subtle p-3 rounded shadow-sm">
                            
                            <div>
                                <h5>¿Tiene storage?</h5>
                                <div id="ejercicio1" class="output"></div>
                            </div>

                            <script>
                                let ejercicio1 = document.getElementById("ejercicio1");
                                if (typeof(Storage) !== 'undefined') 
                                { // Código cuando Storage es compatible
                                    ejercicio1.innerHTML = "Si";

                                } else 
                                { // Código cuando Storage NO es compatible
                                    ejercicio1.innerHTML = "No";
                                }
                            </script>

                        </article>
                    </section>



                    <section class="bg-info-subtle p-3 my-5 rounded shadow border border-info-subtle">
                        <div class="text-center">
                            <h1>Ejercicio 2</h1>
                            <hr class="border border-primary w-25 mx-auto">
                        </div>
                        <article class="bg-secondary-subtle p-3 rounded shadow-sm">
                            
                            <div class="text-center">
                                <div class="mb-3">
                                    <label for="input_ej2" class="form-label">Introduce un texto</label>
                                    <input type="text" name="input_ej2" id="input_ej2" class="form-control">
                                </div>
                                <div class="mb-3">
                                    <button id="btn_ej2" type="button" class="btn btn-primary">Guardar</button>
                                </div>
                            </div>

                            <div id="output_ej2"></div>
                            
                            <script>
                                let btn_ej2 = document.getElementById("btn_ej2");
                                let contador = 0;
                                btn_ej2.addEventListener("click", (e) => {
                                    let contador_str = "cod" + contador;
                                    let content = document.getElementById("input_ej2").value;
                                    let output = document.getElementById("output_ej2");

                                    localStorage.setItem(contador_str, content);
                                    output.innerHTML += `<div class="output mb-1">${localStorage.getItem(contador_str)}</div>`;

                                    contador++;
                                });
                            </script>

                        </article>
                    </section>



                    <section class="bg-info-subtle p-3 my-5 rounded shadow border border-info-subtle">
                        <div class="text-center">
                            <h1>Ejercicio 3</h1>
                            <hr class="border border-primary w-25 mx-auto">
                        </div>
                        <article class="bg-secondary-subtle p-3 rounded shadow-sm">
                            
                            <div class="text-center">
                                <div class="mb-3">
                                    <label for="input_ej3" class="form-label">Introduce un texto</label>
                                    <input type="text" name="input_ej3" id="input_ej3" class="form-control">
                                </div>
                                <div class="mb-3">
                                    <label for="select_ej3" class="form-label">Select</label>
                                    <select name="select_ej3" id="select_ej3" class="form-select"></select>
                                </div>
                                <div class="mb-3">
                                    <button id="btn_ej3" type="button" class="btn btn-primary">Guardar</button>
                                </div>
                            </div>

                            <div id="output_ej3"></div>
                            
                            <script>
                                let btn_ej3 = document.getElementById("btn_ej3");
                                let contador2 = 0;
                                btn_ej3.addEventListener("click", (e) => {
                                    let contador_str = "cod" + contador2;
                                    let content = document.getElementById("input_ej3").value;
                                    let output = document.getElementById("output_ej3");

                                    localStorage.setItem(contador_str, content);
                                    output.innerHTML += `<div class="output mb-1">${localStorage.getItem(contador_str)}</div>`;

                                    contador2++;


                                    select = document.getElementById('select_ej3');
                                    let opt = document.createElement('option');
                                    
                                    opt.value = contador_str;
                                    opt.innerHTML = contador_str;
                                    select.appendChild(opt);

                                });
                            </script>

                        </article>
                    </section>



                    <section class="bg-info-subtle p-3 my-5 rounded shadow border border-info-subtle">
                        <div class="text-center">
                            <h1>Ejercicio 4</h1>
                            <hr class="border border-primary w-25 mx-auto">
                        </div>
                        <article class="bg-secondary-subtle p-3 rounded shadow-sm">
                            
                            <div class="mb-3 text-center">
                                <button id="btn_ej4" type="button" class="btn btn-primary">Mostrar</button>
                            </div>
                            
                            <div id="ej4"></div>

                            <script>
                                let btn_ej4 = document.getElementById("btn_ej4");
                                btn_ej4.addEventListener("click", verItemsStorage);

                                function verItemsStorage ()
                                {
                                    let ej4 = document.getElementById("ej4");
                                    let cadena ="";
                                    for (i in localStorage)
                                    {
                                        if (typeof(localStorage[i])!="function")
                                        {
                                            cadena += i + "=" + localStorage[i] + "<br>"
                                        }
                                    }
                                    ej4.innerHTML = `<div class="output">${cadena}</div>`;
                                }
                            </script>
                            
                        </article>
                    </section>



                    <section class="bg-info-subtle p-3 my-5 rounded shadow border border-info-subtle">
                        <div class="text-center">
                            <h1>Ejercicio 5</h1>
                            <hr class="border border-primary w-25 mx-auto">
                        </div>
                        <article class="bg-secondary-subtle p-3 rounded shadow-sm">
                            
                            <div class="text-center">
                                <h5>Borrado por Selección</h5>
                                <div class="mb-3">
                                    <select id="select_ej5" class="form-select mb-3" onfocus="rellenarSelect()"></select>
                                    <button id="btn_ej5" type="button" class="btn btn-danger">Eliminar Seleccionado</button>
                                </div>
                            </div>
                            <div id="output_ej5"></div>

                            <script>
                                // Función para cargar las llaves del localStorage en el select del Ejercicio 5
                                function rellenarSelect() {
                                    const select = document.getElementById('select_ej5');
                                    select.innerHTML = ""; // Limpiar opciones previas
                                    for (let i = 0; i < localStorage.length; i++) {
                                        let clave = localStorage.key(i);
                                        let opt = document.createElement('option');
                                        opt.value = clave;
                                        opt.innerHTML = clave;
                                        select.appendChild(opt);
                                    }
                                }

                                document.getElementById("btn_ej5").addEventListener("click", () => {
                                    let selectObj = document.getElementById('select_ej5');
                                    let valor = selectObj.value;
                                    
                                    if (valor) {
                                        localStorage.removeItem(valor); // Borra del almacenamiento
                                        rellenarSelect(); // Actualiza el select tras borrar
                                        document.getElementById("output_ej5").innerHTML = `<div class="output mt-2">Eliminado: ${valor}</div>`;
                                    }
                                });
                            </script>

                        </article>
                    </section>



                    <section class="bg-info-subtle p-3 my-5 rounded shadow border border-info-subtle">
                        <div class="text-center">
                            <h1>Ejercicio 6</h1>
                            <hr class="border border-primary w-25 mx-auto">
                        </div>
                        <article class="bg-secondary-subtle p-3 rounded shadow-sm">
                            
                            <div class="text-center">
                                <h5>Mantenimiento de Storage</h5>
                                <button id="btn_ej6" type="button" class="btn btn-dark">Limpiar Todo el Storage</button>
                            </div>
                            <div id="output_ej6" class="mt-3"></div>

                            <script>
                                document.getElementById("btn_ej6").addEventListener("click", () => {
                                    localStorage.clear();
                                    
                                    // Limpiar también el select visualmente
                                    document.getElementById('select_ej3').innerHTML = "";
                                    
                                    document.getElementById("output_ej6").innerHTML = 
                                        `<div class="alert alert-danger py-1">¡LocalStorage vacío!</div>`;
                                });
                            </script>

                        </article>
                    </section>

                </div>
            </div>
        </div>


        <!-- Bootstrap JavaScript Libraries -->
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"
        ></script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"
        ></script>
    </body>
</html>
