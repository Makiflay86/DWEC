<!DOCTYPE html>
<html lang="es-ES">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AybarRomero_Francisco_04-05c JS inmutabilidad con Frezze y Seal.html</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        
        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">
                1º Datos de un estudiante
            </h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej_1"></div>
                <script>
                    let ej_1 = document.getElementById("ej_1");
                    const objeto1 = Object.freeze(
                    {
                        name: "Luis",
                        grande: 7,
                        approved: false
                    });

                    objeto1.grande = 9;
                    ej_1.innerHTML += "Nota: " + objeto1.grande; /* No se cambio la nota */

                    objeto1.age = 19;
                    ej_1.innerHTML += "<br>Age: " + objeto1.age; /* No se creo el age */

                    delete objeto1.approved;
                    ej_1.innerHTML += "<br>Approved: " + objeto1.approved; /* No se puede borrar approved */
                </script>
            </article>
        </section>



        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">
                2º Sellar configuración 
            </h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej_2"></div>
                <script>
                    let ej_2 = document.getElementById("ej_2");
                    const objeto2 = 
                    {
                        volume: 50,
                        brightness: 80
                    };

                    objeto2.contrast = 100; /* Añado el contrast antes de sellarlo y puedo */
                    ej_2.innerHTML += "Contrast: " + objeto2.contrast;

                    Object.seal(objeto2); /* Sello el objeto */

                    objeto2.volume = 15; /* Modifico un atributo y me deja */
                    ej_2.innerHTML += "<br>Volume: " + objeto2.volume;

                    delete objeto2.brightness; /* Intento eliminar el brightness pero no puedo */
                    ej_2.innerHTML += "<br>Brightness: " + objeto2.brightness;
                </script>
            </article>
        </section>



        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">
                3º Congelación profunda
            </h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej_3"></div>
                <script>
                    let ej_3 = document.getElementById("ej_3");
                    function deepFreeze(obj) 
                    {
                        Object.freeze(obj);

                        Object.values(obj)
                            .filter(value => typeof value === "object" && value !== null)
                            .forEach(value => deepFreeze(value));

                        return obj;
                    }

                    const user = deepFreeze(
                    {
                        name: "Ana",
                        settings: 
                        { 
                            theme: "dark" 
                        }
                    });

                    user.settings.theme = "light"; /* Esto sí falla, no se puede cambiar */
                    ej_3.innerHTML += "Settings.theme: " + user.settings.theme;
                </script>
            </article>
        </section>



        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">
                4º Diferencias freeze vs seal
            </h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej_4"></div>
                <script>
                    let ej_4 = document.getElementById("ej_4");
                    const car1 = 
                    { 
                        brand: "Ford", 
                        year: 2010 
                    };
                    const car2 = 
                    { 
                        brand: "Ford", 
                        year: 2010 
                    };

                    Object.freeze(car1); /* Aplicar el objeto car1 el freeze */
                    Object.seal(car2); /* Aplicar el objeto car2 el seal */

                    car1.year = 2020; /* El car1 al convertirle a freeze no deja modificar el valor de los atributos */
                    car2.year = 2020;
                    ej_4.innerHTML += "car1.year: " + car1.year;
                    ej_4.innerHTML += "<br>car2.year: " + car2.year;

                    car1.color = "red"; /* En ninguno de los dos puedo añadir nada */
                    car2.color = "red";
                    ej_4.innerHTML += "<br>car1.color: " + car1.color; 
                    ej_4.innerHTML += "<br>car2.color: " + car2.color;

                    delete car1.brand; /* En ninguno de los dos puedo borrar nada */
                    delete car2.brand;
                    ej_4.innerHTML += "<br>car1.brand: " + car1.brand; 
                    ej_4.innerHTML += "<br>car2.brand: " + car2.brand;
                </script>
            </article>
        </section>



        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">
                5º Estado de una app
            </h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej_5"></div>
                <script>
                    let ej_5 = document.getElementById("ej_5");
                    const state = 
                    {
                        settings: 
                        {
                            notifications: true,
                            theme: "light"
                        },
                        user: 
                        {
                            name: "Carlos",
                            loggedIn: true
                        }
                    };

                    Object.freeze(state); /* Congelo el objeto state */

                    state.loggedIn = false; /* No cambia */
                    ej_5.innerHTML += "state.user.loggedIn: " + state.user.loggedIn;
                </script>
            </article>
        </section>



    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>
</body>
</html>