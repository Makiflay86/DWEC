<!doctype html>
<html lang="es-ES">
<head>
    <title>AybarRomero_Francisco_04-08 JS Objetos ES6</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
    <div class="container-fluid w-75">

        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">1º y 2º Ejercicio: Clase Alumno y Propiedades</h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej-1-2"></div>
                <script>
                    const out1 = document.getElementById("ej-1-2");

                    class Alumno {
                        constructor(nombre, apellidos, id, nombresModulos, notasModulos) {
                            this._nombre = nombre;
                            this._apellidos = apellidos;
                            this._id = id;
                            this.nombresModulos = nombresModulos;
                            this.notasModulos = notasModulos;
                        }

                        // 2.1 Getters y Setters
                        get nombre() { return this._nombre; }
                        set nombre(v) { this._nombre = v; }
                        get apellidos() { return this._apellidos; }
                        set apellidos(v) { this._apellidos = v; }
                        get id() { return this._id; }
                        set id(v) { this._id = v; }

                        // 2.2 Mostrar modulos
                        mostrarModulos(idDestino) {
                            const res = this.nombresModulos.join(", ");
                            document.getElementById(idDestino).innerHTML += `<p><strong>Módulos:</strong> ${res}</p>`;
                            return res;
                        }

                        // 2.3 Nota por nombre
                        nota(nombreModulo) {
                            const i = this.nombresModulos.indexOf(nombreModulo);
                            return i !== -1 ? `La nota en ${nombreModulo} es ${this.notasModulos[i]}` : "Módulo no encontrado";
                        }

                        // 2.4 Media
                        media(idDestino) {
                            const m = (this.notasModulos.reduce((a, b) => a + b, 0) / this.notasModulos.length).toFixed(2);
                            document.getElementById(idDestino).innerHTML += `<p><strong>Media:</strong> ${m}</p>`;
                            return m;
                        }

                        // 2.5 Suspensas
                        suspensas(idDestino) {
                            const s = this.notasModulos.filter(n => n < 5);
                            document.getElementById(idDestino).innerHTML += `<p><strong>Notas Suspensas:</strong> ${s.length ? s.join(", ") : "Ninguna"}</p>`;
                        }

                        // 2.6 Aprobadas
                        aprobadas(idDestino) {
                            const a = this.notasModulos.filter(n => n >= 5);
                            document.getElementById(idDestino).innerHTML += `<p><strong>Notas Aprobadas:</strong> ${a.join(", ")}</p>`;
                        }
                    }

                    // EJECUCIÓN COMPLETA EJERCICIO 2
                    const alu1 = new Alumno("Francisco", "Aybar", "far-01", ["DIW", "DWEC", "DWES"], [8, 4, 7]);
                    out1.innerHTML += `<h3>Pruebas Alumno: ${alu1.nombre} ${alu1.apellidos} (ID: ${alu1.id})</h3>`;
                    alu1.mostrarModulos("ej-1-2");
                    out1.innerHTML += `<p><strong>Consulta nota individual (DIW):</strong> ${alu1.nota("DIW")}</p>`;
                    alu1.media("ej-1-2");
                    alu1.suspensas("ej-1-2");
                    alu1.aprobadas("ej-1-2");
                </script>
            </article>
        </section>

        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">3º Ejercicio: Objeto Clase (Array de Alumnos)</h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej-3"></div>
                <script>
                    const outClase = document.getElementById("ej-3");
                    // 3. Objeto clase con notación anónima (arrow functions)
                    const GestionClase = {
                        alumnos: [],
                        matricular: (alu) => GestionClase.alumnos.push(alu),
                        eliminar: (alu) => {
                            GestionClase.alumnos = GestionClase.alumnos.filter(a => a.id !== alu.id);
                        },
                        numero: () => GestionClase.alumnos.length,
                        mostrar: (id) => {
                            let lista = GestionClase.alumnos.map(a => `${a.nombre} (ID: ${a.id})`).join(" | ");
                            document.getElementById(id).innerHTML += `<p><strong>Lista de Alumnos:</strong> ${lista || "Vacía"}</p>`;
                        }
                    };

                    // EJECUCIÓN COMPLETA EJERCICIO 3
                    GestionClase.matricular(alu1);
                    outClase.innerHTML += `<p><strong>Alumnos tras matricular:</strong> ${GestionClase.numero()}</p>`;
                    GestionClase.mostrar("ej-3");
                    GestionClase.eliminar(alu1);
                    outClase.innerHTML += `<p><strong>Alumnos tras eliminar:</strong> ${GestionClase.numero()}</p>`;
                    GestionClase.mostrar("ej-3");
                </script>
            </article>
        </section>

        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">4º Ejercicio: Herencia (AlumnoFP y Dual)</h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej-4"></div>
                <script>
                    const out4 = document.getElementById("ej-4");

                    class AlumnoFP extends Alumno {
                        constructor(nombre, apellidos, id, modulos, notas, empresaFct) {
                            super(nombre, apellidos, id, modulos, notas);
                            this.empresaFct = empresaFct;
                        }
                        hacerFCT(empresa) { 
                            this.empresaFct = empresa; 
                            return `El alumno ${this.nombre} está haciendo las FCT en ${this.empresaFct}`; 
                        }
                    }

                    class AlumnoFPDual extends AlumnoFP {
                        constructor(nombre, apellidos, id, modulos, notas, empresaFct, empresaDual) {
                            super(nombre, apellidos, id, modulos, notas, empresaFct);
                            this.empresaFctDual = empresaDual;
                        }
                        hacerFCTDual(empresaDual) { 
                            this.empresaFctDual = empresaDual; 
                            return `El alumno ${this.nombre} está haciendo la Dual en ${this.empresaFctDual}`; 
                        }
                    }

                    // EJECUCIÓN COMPLETA EJERCICIO 4
                    const aluDual = new AlumnoFPDual("Juan", "Pérez", "jp-02", ["DWES"], [10], "Indra", "Google");
                    out4.innerHTML += `<p><strong>Atributo Empresa FCT:</strong> ${aluDual.empresaFct}</p>`;
                    out4.innerHTML += `<p><strong>Método hacerFCT:</strong> ${aluDual.hacerFCT("Microsoft")}</p>`;
                    out4.innerHTML += `<p><strong>Atributo Empresa Dual:</strong> ${aluDual.empresaFctDual}</p>`;
                    out4.innerHTML += `<p><strong>Método hacerFCTDual:</strong> ${aluDual.hacerFCTDual("Amazon")}</p>`;
                </script>
            </article>
        </section>

        <section class="bg-info-subtle my-5 p-5 border border-info rounded shadow">
            <h1 class="text-center">5º Ejercicio: Mixin Matricular</h1>
            <article class="bg-white mt-5 p-5 border border-black rounded shadow">
                <div id="ej-5"></div>
                <script>
                    // 5. Definición del Mixin
                    let matricularMixin = {
                        matricula() { return `[MIXIN] El alumno ${this.nombre} ha ejecutado el proceso de matriculación oficial.`; }
                    };

                    // Asignación a las tres clases
                    Object.assign(Alumno.prototype, matricularMixin);
                    Object.assign(AlumnoFP.prototype, matricularMixin);
                    Object.assign(AlumnoFPDual.prototype, matricularMixin);

                    // EJECUCIÓN COMPLETA EJERCICIO 5
                    const aluNormal = new Alumno("Ana", "Soto", "as-04", [], []);
                    const aluDualMix = new AlumnoFPDual("Luis", "Gómez", "lg-05", [], [], "", "");
                    
                    document.getElementById("ej-5").innerHTML += `<p><strong>Desde Alumno:</strong> ${aluNormal.matricula()}</p>`;
                    document.getElementById("ej-5").innerHTML += `<p><strong>Desde AlumnoFPDual:</strong> ${aluDualMix.matricula()}</p>`;
                </script>
            </article>
        </section>

    </div>
</body>
</html>